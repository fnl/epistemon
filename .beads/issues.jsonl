{"id":"epistemon-3z8","title":"Integrate BM25 keyword search","description":"Implement BM25 keyword-based search alongside semantic search for comparison in the web UI. Uses in-memory BM25 that rebuilds on startup. Supports V1 goals from ROADMAP.md.\n\n## User Story\n\nAS A researcher exploring search strategies\nI WANT TO compare BM25 keyword search with semantic embedding search\nSO THAT I can understand when each approach is more effective for my queries","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-02T18:08:13.161003961+01:00","created_by":"fnl","updated_at":"2026-01-02T18:26:23.221247505+01:00"}
{"id":"epistemon-3z8.1","title":"Implement in-memory BM25 indexer","description":"Create a BM25Indexer class that builds an in-memory BM25 index from markdown chunks on startup. No persistence needed - rebuild from vector store documents each time. Should integrate with existing document loading workflow.\n\nUse TDD: Write tests first, then implement. Tests should cover index building, document loading, and integration with existing workflows.","acceptance_criteria":"GIVEN a collection of markdown document chunks\nWHEN the BM25 indexer is initialized on application startup\nTHEN it builds an in-memory BM25 index from all document page_content\nAND the index is ready for query execution\nAND no persistence to disk is required","notes":"Implementation loads markdown chunks from input directory on disk, not from vector store. Uses same chunking strategy (load_and_chunk_markdown) as vector store for consistency. BM25 index is built in-memory from page_content of chunks.","status":"closed","priority":2,"issue_type":"task","assignee":"fnl","created_at":"2026-01-02T18:12:02.968650246+01:00","created_by":"fnl","updated_at":"2026-01-03T09:24:49.80166644+01:00","closed_at":"2026-01-03T09:24:49.801669712+01:00","dependencies":[{"issue_id":"epistemon-3z8.1","depends_on_id":"epistemon-3z8","type":"parent-child","created_at":"2026-01-02T18:12:02.969658696+01:00","created_by":"fnl"}]}
{"id":"epistemon-3z8.2","title":"Add BM25 retrieval function","description":"Implement retrieval function that returns top-k chunks using BM25 scoring. Should match the interface of semantic search retrieval (accept query string, return Documents with scores).\n\nUse TDD: Write tests first, then implement. Tests should verify ranking correctness, score calculation, and Document interface compliance.","acceptance_criteria":"GIVEN a BM25 index has been built from documents\nWHEN a user submits a query string with a result limit\nTHEN the retriever returns the top-k ranked documents with BM25 scores\nAND the results match LangChain's Document interface\nAND scores represent BM25 relevance ranking","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T18:12:10.037318284+01:00","created_by":"fnl","updated_at":"2026-01-02T18:36:43.939643439+01:00","dependencies":[{"issue_id":"epistemon-3z8.2","depends_on_id":"epistemon-3z8","type":"parent-child","created_at":"2026-01-02T18:12:10.04141626+01:00","created_by":"fnl"},{"issue_id":"epistemon-3z8.2","depends_on_id":"epistemon-3z8.1","type":"blocks","created_at":"2026-01-02T18:20:03.696656592+01:00","created_by":"fnl"}]}
{"id":"epistemon-3z8.3","title":"Update Shiny UI for side-by-side results","description":"Add BM25 results column to Shiny UI alongside semantic search results. Display both result sets side-by-side with source, content snippet, and scores for comparison.\n\n## Current UI Structure\n- Layout: Sidebar + single main column\n- Sidebar: Query input, limit input, search button\n- Main area: Vertical list of result cards\n- Each card: Result number, score badge, content snippet, source/metadata\n\n## Required Changes\n\n### 1. Layout Restructure (Two Columns)\nReplace single results area with side-by-side columns:\n- Left column: BM25 (Keyword Search) results\n- Right column: Semantic (Embedding Search) results\n- Use ui.layout_columns() or ui.row() with multiple columns\n\n### 2. Column Headers\n- Clear labels for each column: \"BM25 (Keyword Search)\" and \"Semantic (Embedding Search)\"\n\n### 3. Parallel Search Execution\n- Call both BM25 and semantic search with same query\n- Align results: result N from BM25 next to result N from semantic\n\n### 4. Visual Differentiation\n- Distinct score badge colors for BM25 scores vs similarity/distance scores\n- Handle different result counts: show empty state if one strategy returns fewer results\n\n### 5. Function Signature Update\ncreate_shiny_app() needs BM25 retriever parameter:\n  def create_shiny_app(\n      vector_store: VectorStore,\n      bm25_retriever: BM25Retriever,  # NEW\n      base_url: str = \"\",\n      score_threshold: float = 0.0,\n  ) -\u003e App:\n\n### 6. Result Rendering\nGenerate two sets of cards in parallel, maintaining alignment by rank position.\n\nFile: epistemon/web/shiny_ui.py (lines 25-182)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-02T18:12:13.040866106+01:00","created_by":"fnl","updated_at":"2026-01-02T18:17:00.273394377+01:00","dependencies":[{"issue_id":"epistemon-3z8.3","depends_on_id":"epistemon-3z8","type":"parent-child","created_at":"2026-01-02T18:12:13.044913639+01:00","created_by":"fnl"}],"deleted_at":"2026-01-02T18:17:00.273394377+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"epistemon-3z8.4","title":"Add tests for BM25 functionality","description":"Write unit and integration tests for BM25 indexer and retriever using TDD workflow. Tests should verify correct ranking, score calculation, and integration with document loading.","acceptance_criteria":"GIVEN the BM25 indexer and retriever are implemented\nWHEN the test suite is executed\nTHEN all unit tests for indexing pass\nAND all unit tests for retrieval pass\nAND integration tests verify correct ranking behavior\nAND tests verify score calculation accuracy","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-02T18:12:16.357393473+01:00","created_by":"fnl","updated_at":"2026-01-02T18:36:28.547546366+01:00","deleted_at":"2026-01-02T18:36:28.547546366+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"epistemon-3z8.5","title":"Add BM25 configuration options","description":"Add BM25-specific configuration options to config.yaml (k1, b parameters, top_k results). Document parameter meanings and sensible defaults.","acceptance_criteria":"GIVEN the BM25 implementation is complete\nWHEN config.yaml is updated with BM25 settings\nTHEN users can configure k1 parameter (term frequency saturation)\nAND users can configure b parameter (length normalization)\nAND users can configure top_k results limit\nAND sensible defaults are documented","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T18:12:34.512054473+01:00","created_by":"fnl","updated_at":"2026-01-02T18:26:24.917889063+01:00","dependencies":[{"issue_id":"epistemon-3z8.5","depends_on_id":"epistemon-3z8","type":"parent-child","created_at":"2026-01-02T18:12:34.515959802+01:00","created_by":"fnl"},{"issue_id":"epistemon-3z8.5","depends_on_id":"epistemon-3z8.1","type":"blocks","created_at":"2026-01-02T18:20:04.279229207+01:00","created_by":"fnl"}]}
{"id":"epistemon-3z8.6","title":"Document BM25 architecture","description":"Document BM25 implementation patterns in CLAUDE.md: in-memory rebuild strategy, integration with vector store, comparison with semantic search approach.","acceptance_criteria":"GIVEN all BM25 implementation tasks are complete\nWHEN CLAUDE.md is updated\nTHEN the in-memory rebuild strategy is documented\nAND the integration with vector store is explained\nAND the comparison with semantic search approach is described\nAND implementation patterns are clear for future developers","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T18:12:37.481482929+01:00","created_by":"fnl","updated_at":"2026-01-02T18:26:25.24482184+01:00","dependencies":[{"issue_id":"epistemon-3z8.6","depends_on_id":"epistemon-3z8","type":"parent-child","created_at":"2026-01-02T18:12:37.482498058+01:00","created_by":"fnl"},{"issue_id":"epistemon-3z8.6","depends_on_id":"epistemon-3z8.1","type":"blocks","created_at":"2026-01-02T18:20:04.568196786+01:00","created_by":"fnl"},{"issue_id":"epistemon-3z8.6","depends_on_id":"epistemon-3z8.2","type":"blocks","created_at":"2026-01-02T18:20:04.583740404+01:00","created_by":"fnl"},{"issue_id":"epistemon-3z8.6","depends_on_id":"epistemon-3z8.5","type":"blocks","created_at":"2026-01-02T18:20:04.615031659+01:00","created_by":"fnl"},{"issue_id":"epistemon-3z8.6","depends_on_id":"epistemon-3z8.7","type":"blocks","created_at":"2026-01-02T18:20:04.631517902+01:00","created_by":"fnl"}]}
{"id":"epistemon-3z8.7","title":"Update Shiny UI for side-by-side search comparison","description":"Restructure the Shiny UI to display BM25 keyword search and semantic embedding search results side-by-side for direct comparison. This epic covers all UI layout, rendering, and integration changes needed.\n\n## User Story\n\nAS A user searching for information\nI WANT TO see BM25 and semantic search results side-by-side\nSO THAT I can quickly compare which strategy surfaces more relevant results for my query","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-02T18:16:34.466700854+01:00","created_by":"fnl","updated_at":"2026-01-02T18:26:23.55605064+01:00","dependencies":[{"issue_id":"epistemon-3z8.7","depends_on_id":"epistemon-3z8","type":"parent-child","created_at":"2026-01-02T18:16:34.467644561+01:00","created_by":"fnl"}]}
{"id":"epistemon-3z8.7.1","title":"Update create_shiny_app function signature","description":"Add bm25_retriever parameter to create_shiny_app() function signature. Update all callers in app.py. File: epistemon/web/shiny_ui.py","acceptance_criteria":"GIVEN the BM25 retriever exists\nWHEN the create_shiny_app function signature is updated\nTHEN it accepts a bm25_retriever parameter\nAND all callers in app.py are updated\nAND type hints are correct\nAND no existing functionality breaks","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T18:17:08.739928064+01:00","created_by":"fnl","updated_at":"2026-01-02T18:26:25.6302424+01:00","dependencies":[{"issue_id":"epistemon-3z8.7.1","depends_on_id":"epistemon-3z8.7","type":"parent-child","created_at":"2026-01-02T18:17:08.740976074+01:00","created_by":"fnl"},{"issue_id":"epistemon-3z8.7.1","depends_on_id":"epistemon-3z8.2","type":"blocks","created_at":"2026-01-02T18:20:04.945340901+01:00","created_by":"fnl"}]}
{"id":"epistemon-3z8.7.2","title":"Implement two-column layout structure","description":"Replace single results area with side-by-side columns using ui.layout_columns() or ui.row(). Add column headers: 'BM25 (Keyword Search)' and 'Semantic (Embedding Search)'. File: epistemon/web/shiny_ui.py","acceptance_criteria":"GIVEN the Shiny app UI exists\nWHEN the layout is restructured\nTHEN the results area displays two columns side-by-side\nAND the left column has header \"BM25 (Keyword Search)\"\nAND the right column has header \"Semantic (Embedding Search)\"\nAND columns are visually balanced and responsive","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T18:17:13.569363605+01:00","created_by":"fnl","updated_at":"2026-01-02T18:27:35.843759988+01:00","dependencies":[{"issue_id":"epistemon-3z8.7.2","depends_on_id":"epistemon-3z8.7","type":"parent-child","created_at":"2026-01-02T18:17:13.573652939+01:00","created_by":"fnl"}]}
{"id":"epistemon-3z8.7.3","title":"Implement parallel search execution","description":"Execute both BM25 and semantic search with the same query in the results() function. Handle errors from either search independently. File: epistemon/web/shiny_ui.py\n\nUse TDD: Write tests first, then implement. Tests should verify both searches execute, independent error handling, and results format.","acceptance_criteria":"GIVEN both BM25 and semantic retrievers are available\nWHEN a user submits a search query\nTHEN both BM25 and semantic searches execute with the same query\nAND each search executes independently\nAND errors from one search don't crash the other\nAND results are ready for parallel rendering","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T18:17:16.613691078+01:00","created_by":"fnl","updated_at":"2026-01-02T18:36:44.183341988+01:00","dependencies":[{"issue_id":"epistemon-3z8.7.3","depends_on_id":"epistemon-3z8.7","type":"parent-child","created_at":"2026-01-02T18:17:16.618124979+01:00","created_by":"fnl"},{"issue_id":"epistemon-3z8.7.3","depends_on_id":"epistemon-3z8.7.1","type":"blocks","created_at":"2026-01-02T18:20:05.249662791+01:00","created_by":"fnl"},{"issue_id":"epistemon-3z8.7.3","depends_on_id":"epistemon-3z8.2","type":"blocks","created_at":"2026-01-02T18:20:05.268163588+01:00","created_by":"fnl"}]}
{"id":"epistemon-3z8.7.4","title":"Implement side-by-side result rendering","description":"Generate two sets of result cards aligned by rank position. Use distinct badge colors for BM25 vs semantic scores. Handle different result counts gracefully with empty states. File: epistemon/web/shiny_ui.py\n\nUse TDD: Write tests first, then implement. Tests should verify column rendering, alignment, badge colors, and empty state handling.","acceptance_criteria":"GIVEN BM25 and semantic search results are available\nWHEN the results are rendered\nTHEN BM25 results appear in the left column\nAND semantic results appear in the right column\nAND results are aligned by rank position (result 1, 2, 3...)\nAND BM25 scores use distinct badge colors from semantic scores\nAND empty states display gracefully when result counts differ","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T18:17:19.16560527+01:00","created_by":"fnl","updated_at":"2026-01-02T18:36:44.442999653+01:00","dependencies":[{"issue_id":"epistemon-3z8.7.4","depends_on_id":"epistemon-3z8.7","type":"parent-child","created_at":"2026-01-02T18:17:19.169840311+01:00","created_by":"fnl"},{"issue_id":"epistemon-3z8.7.4","depends_on_id":"epistemon-3z8.7.2","type":"blocks","created_at":"2026-01-02T18:20:05.579274615+01:00","created_by":"fnl"},{"issue_id":"epistemon-3z8.7.4","depends_on_id":"epistemon-3z8.7.3","type":"blocks","created_at":"2026-01-02T18:20:05.595032514+01:00","created_by":"fnl"}]}
{"id":"epistemon-3z8.7.5","title":"Add UI integration tests","description":"Write tests for the side-by-side UI rendering: verify both columns render, parallel search execution works, error handling for each search type, and alignment of results by rank.","acceptance_criteria":"GIVEN the side-by-side UI is implemented\nWHEN UI integration tests are executed\nTHEN tests verify both columns render correctly\nAND tests verify parallel search execution works\nAND tests verify error handling for each search type\nAND tests verify result alignment by rank","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-02T18:17:21.650682923+01:00","created_by":"fnl","updated_at":"2026-01-02T18:36:28.547546366+01:00","deleted_at":"2026-01-02T18:36:28.547546366+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
